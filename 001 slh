import javax.xml.ws.handler.soap.SOAPHandler;
import javax.xml.ws.handler.soap.SOAPMessageContext;
import javax.xml.ws.handler.MessageContext;
import javax.xml.soap.SOAPMessage;
import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

public class SoapLoggingHandler implements SOAPHandler<SOAPMessageContext> {

    private static final Logger log = LogManager.getLogger(SoapLoggingHandler.class);

    @Override
    public boolean handleMessage(SOAPMessageContext context) {
        try {
            SOAPMessage message = context.getMessage();
            boolean outbound = (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

            java.io.ByteArrayOutputStream out = new java.io.ByteArrayOutputStream();
            message.writeTo(out);
            String soap = new String(out.toByteArray());

            if (outbound) {
                log.info("Outbound SOAP:\n" + soap);
            } else {
                log.info("Inbound SOAP:\n" + soap);
            }

        } catch (Exception e) {
            log.error("Error logging SOAP", e);
        }

        return true;
    }

    @Override public java.util.Set getHeaders() { return null; }
    @Override public void close(MessageContext context) {}
    @Override public boolean handleFault(SOAPMessageContext context) { return true; }
}





MyService service = new MyService();
MyPort port = service.getMyPort();

Binding binding = ((BindingProvider) port).getBinding();
List handlerChain = new ArrayList();
handlerChain.add(new SoapLoggingHandler());
binding.setHandlerChain(handlerChain);
